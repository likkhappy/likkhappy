define("lib/JuicerTemplate",[],function(a,b,c){var d=function(){var a=[].slice.call(arguments);return a.push(d.options),a[0].match(/^\s*#([\w:\-\.]+)\s*$/gim)&&a[0].replace(/^\s*#([\w:\-\.]+)\s*$/gim,function(b,c){var d=document,e=d&&d.getElementById(c);a[0]=e?e.value||e.innerHTML:b}),1==arguments.length?d.compile.apply(d,a):arguments.length>=2?d.to_html.apply(d,a):void 0},e={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(a){return e.escapehash[a]},escaping:function(a){return"string"!=typeof a?a:a.replace(/[&<>"]/gim,this.escapereplace)},detection:function(a){return"undefined"==typeof a?"":a}},f=function(a){if("undefined"!=typeof console){if(console.warn)return void console.warn(a);if(console.log)return void console.log(a)}throw a},g=function(a,b){if(a=a!==Object(a)?{}:a,a.__proto__)return a.__proto__=b,a;var c=function(){},d=Object.create?Object.create(b):new(c.prototype=b,c);for(var e in a)a.hasOwnProperty(e)&&(d[e]=a[e]);return d};return d.__cache={},d.version="0.6.5-stable",d.settings={},d.tags={operationOpen:"{@",operationClose:"}",interpolateOpen:"\\${",interpolateClose:"}",noneencodeOpen:"\\$\\${",noneencodeClose:"}",commentOpen:"\\{#",commentClose:"\\}"},d.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:g({__escapehtml:e,__throw:f,__juicer:d},{})},d.tagInit=function(){var a=d.tags.operationOpen+"each\\s*([^}]*?)\\s*as\\s*(\\w*?)\\s*(,\\s*\\w*?)?"+d.tags.operationClose,b=d.tags.operationOpen+"\\/each"+d.tags.operationClose,c=d.tags.operationOpen+"if\\s*([^}]*?)"+d.tags.operationClose,e=d.tags.operationOpen+"\\/if"+d.tags.operationClose,f=d.tags.operationOpen+"else"+d.tags.operationClose,g=d.tags.operationOpen+"else if\\s*([^}]*?)"+d.tags.operationClose,h=d.tags.interpolateOpen+"([\\s\\S]+?)"+d.tags.interpolateClose,i=d.tags.noneencodeOpen+"([\\s\\S]+?)"+d.tags.noneencodeClose,j=d.tags.commentOpen+"[^}]*?"+d.tags.commentClose,k=d.tags.operationOpen+"each\\s*(\\w*?)\\s*in\\s*range\\(([^}]+?)\\s*,\\s*([^}]+?)\\)"+d.tags.operationClose,l=d.tags.operationOpen+"include\\s*([^}]*?)\\s*,\\s*([^}]*?)"+d.tags.operationClose;d.settings.forstart=new RegExp(a,"igm"),d.settings.forend=new RegExp(b,"igm"),d.settings.ifstart=new RegExp(c,"igm"),d.settings.ifend=new RegExp(e,"igm"),d.settings.elsestart=new RegExp(f,"igm"),d.settings.elseifstart=new RegExp(g,"igm"),d.settings.interpolate=new RegExp(h,"igm"),d.settings.noneencode=new RegExp(i,"igm"),d.settings.inlinecomment=new RegExp(j,"igm"),d.settings.rangestart=new RegExp(k,"igm"),d.settings.include=new RegExp(l,"igm")},d.tagInit(),d.set=function(a,b){var c=this,d=function(a){return a.replace(/[\$\(\)\[\]\+\^\{\}\?\*\|\.]/gim,function(a){return"\\"+a})},e=function(a,b){var e=a.match(/^tag::(.*)$/i);return e?(c.tags[e[1]]=d(b),void c.tagInit()):void(c.options[a]=b)};if(2===arguments.length)return void e(a,b);if(a===Object(a))for(var f in a)a.hasOwnProperty(f)&&e(f,a[f])},d.register=function(a,b){var c=this.options._method;return c.hasOwnProperty(a)?!1:c[a]=b},d.unregister=function(a){var b=this.options._method;return b.hasOwnProperty(a)?delete b[a]:void 0},d.template=function(a){var b=this;this.options=a,this.__interpolate=function(a,b,c){var d,e=a.split("|"),f=e[0]||"";return e.length>1&&(a=e.shift(),d=e.shift().split(","),f="_method."+d.shift()+".call({}, "+[a].concat(d)+")"),"<%= "+(b?"_method.__escapehtml.escaping":"")+"("+(c&&c.detection===!1?"":"_method.__escapehtml.detection")+"("+f+")) %>"},this.__removeShell=function(a,c){var e=0;return a=a.replace(d.settings.forstart,function(a,b,c,d){var c=c||"value",d=d&&d.substr(1),f="i"+e++;return"<% ~function() {for(var "+f+" in "+b+") {if("+b+".hasOwnProperty("+f+")) {var "+c+"="+b+"["+f+"];"+(d?"var "+d+"="+f+";":"")+" %>"}).replace(d.settings.forend,"<% }}}(); %>").replace(d.settings.ifstart,function(a,b){return"<% if("+b+") { %>"}).replace(d.settings.ifend,"<% } %>").replace(d.settings.elsestart,function(){return"<% } else { %>"}).replace(d.settings.elseifstart,function(a,b){return"<% } else if("+b+") { %>"}).replace(d.settings.noneencode,function(a,d){return b.__interpolate(d,!1,c)}).replace(d.settings.interpolate,function(a,d){return b.__interpolate(d,!0,c)}).replace(d.settings.inlinecomment,"").replace(d.settings.rangestart,function(a,b,c,d){var f="j"+e++;return"<% ~function() {for(var "+f+"="+c+";"+f+"<"+d+";"+f+"++) {{var "+b+"="+f+"; %>"}).replace(d.settings.include,function(a,b,c){return b.match(/^file\:\/\//gim)?a:"<%= _method.__juicer("+b+", "+c+"); %>"}),c&&c.errorhandling===!1||(a="<% try { %>"+a,a+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>'),a},this.__toNative=function(a,b){return this.__convert(a,!b||b.strip)},this.__lexicalAnalyze=function(a){var b=[],c=[],e="",f=["if","each","_","_method","console","break","case","catch","continue","debugger","default","delete","do","finally","for","function","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with","null","typeof","class","enum","export","extends","import","super","implements","interface","let","package","private","protected","public","static","yield","const","arguments","true","false","undefined","NaN"],g=function(a,b){if(Array.prototype.indexOf&&a.indexOf===Array.prototype.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},h=function(a,e){if(e=e.match(/\w+/gim)[0],-1===g(b,e)&&-1===g(f,e)&&-1===g(c,e)){if("undefined"!=typeof window&&"function"==typeof window[e]&&window[e].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return a;if("undefined"!=typeof global&&"function"==typeof global[e]&&global[e].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return a;if("function"==typeof d.options._method[e]||d.options._method.hasOwnProperty(e))return c.push(e),a;b.push(e)}return a};a.replace(d.settings.forstart,h).replace(d.settings.interpolate,h).replace(d.settings.ifstart,h).replace(d.settings.elseifstart,h).replace(d.settings.include,h).replace(/[\+\-\*\/%!\?\|\^&~<>=,\(\)\[\]]\s*([A-Za-z_]+)/gim,h);for(var i=0;i<b.length;i++)e+="var "+b[i]+"=_."+b[i]+";";for(var i=0;i<c.length;i++)e+="var "+c[i]+"=_method."+c[i]+";";return"<% "+e+" %>"},this.__convert=function(a,b){var c=[].join("");return c+="'use strict';",c+="var _=_||{};",c+="var _out='';_out+='",c+=b!==!1?a.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":a.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"},this.parse=function(a,c){var d=this;return c&&c.loose===!1||(a=this.__lexicalAnalyze(a)+a),a=this.__removeShell(a,c),a=this.__toNative(a,c),this._render=new Function("_, _method",a),this.render=function(a,c){return c&&c===b.options._method||(c=g(c,b.options._method)),d._render.call(this,a,c)},this}},d.compile=function(a,b){b&&b===this.options||(b=g(b,this.options));try{var c=this.__cache[a]?this.__cache[a]:new this.template(this.options).parse(a,b);return b&&b.cache===!1||(this.__cache[a]=c),c}catch(d){return f("Juicer Compile Exception: "+d.message),{render:function(){}}}},d.to_html=function(a,b,c){return c&&c===this.options||(c=g(c,this.options)),this.compile(a,c).render(b,c._method)},"undefined"!=typeof c&&c.exports?c.exports=d:this.juicer=d,d});